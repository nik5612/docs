import{p as i,v as h,c as u,o as p,r as w,t as y}from"./framework.Bc-hQ86P.js";const g={class:"news-parser"},D={key:0},k={key:1,class:"error"},j={__name:"NewsParser",setup(x){const o=i([]),m=i(!0),l=i(null);h(async()=>{try{const e=Object.assign({});o.value=Object.entries(e).map(([t,r])=>{const n=t.replace("../news/",""),c=n.split("/").pop().replace(".md",""),a=r.default,s=d(a);return{url:`/docs/news/${n.replace(".md",".html")}`,title:s.title||c,date:f(s.date),excerpt:s.excerpt||"",image:s.image?v(s.image,n):null,rawContent:a}}),o.value.sort((t,r)=>r.date-t.date)}catch(e){l.value="Ошибка загрузки новостей",console.error("NewsParser error:",e)}finally{m.value=!1}});function d(e){const t=/^---\s*\n([\s\S]*?)\n---\s*\n?/,r=e.match(t);if(!r)return{};try{const n={};return r[1].split(`
`).forEach(c=>{const a=c.indexOf(":");if(a>0){const s=c.slice(0,a).trim(),_=c.slice(a+1).trim();n[s]=_.replace(/^['"]|['"]$/g,"")}}),n}catch{return{}}}function f(e){if(!e)return new Date;try{return new Date(e.includes("-")?e:e.split(".").reverse().join("-"))}catch{return new Date}}function v(e,t){return`/docs/news/${t.split("/").slice(0,-1).join("/")}/${e}`}return(e,t)=>(p(),u("div",g,[m.value?(p(),u("div",D,"Загрузка новостей...")):l.value?(p(),u("div",k,y(l.value),1)):w(e.$slots,"default",{key:2,news:o.value})]))}};export{j as _};
